<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="App de Los Simpsons con Tailwind, TypeScript y Vite" />
  <link rel="icon" href="./assets/icono.png" type="image/svg+xml" />
  <link rel="stylesheet" href="./src/style.css" />
  <style>
   
    
    .inverted .character-card h3,
    

 
    .theme-3 {
      background-image: url('https://www.metro951.com/wp-content/uploads/2014/10/Simpson1.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      color: #ffffff;
    }

    .theme-3 .character-card {
      background-color: rgba(0, 0, 0, 0.7);
    }

    .theme-3 header,
    .theme-3 footer,
    .theme-3 #character {
      background-color: rgba(0, 0, 0, 0.8);
    }

    .theme-3 h1,
    .theme-3 h2,
    .theme-3 h3,
    .theme-3 p {
      color: #facc15;
    }
  </style>

</head>

<body class="bg-gray-900 text-white font-mono min-h-screen">
  <div id="pantalla-carga"
    class="relative flex flex-col justify-center items-center h-screen bg-gray-900 text-yellow-400 text-center px-4">
    <img src="src/b5e81119039b541cef829b14a1d294fd-removebg-preview (2).png" alt="Simpsons esquina superior"
      class="absolute top-0 left-0 w-28 md:w-50 m-4" />
    <h1 class="text-3xl md:text-5xl font-bold mb-10 drop-shadow-[0_0_10px_#facc15]">
      Grupo API simpson Techtalent
    </h1>
    <div class="flex flex-col sm:flex-row gap-4">
      <a href="index.html">
        <button class="px-8 py-4 bg-yellow-400 text-gray-900 font-bold text-xl rounded-lg shadow-lg hover:bg-yellow-300 transition">
          Entrar
        </button>
      </a>
      
      <button id="btn-quiz"
        class="px-8 py-4 bg-yellow-500 text-gray-900 font-bold text-xl rounded-lg shadow-lg hover:bg-yellow-400 transition">
        Quiz
      </button>
      <button id=""
        class="px-8 py-4 bg-yellow-500 text-gray-900 font-bold text-xl rounded-lg shadow-lg hover:bg-yellow-400 transition">
        Quiz Sonidos
      </button>
    </div>
    <h1 class="text-xl md:text-2xl mt-10 text-white/60">
      Realizado por Luis, Daniel, Carlos y Juli.
    </h1>
    <img src="src/bart-removebg-preview (1).png" alt="Simpsons esquina inferior"
      class="absolute bottom-0 right-0 w-[240px] md:w-[320px] m-4" />
  </div>

  <div id="contenido" class="hidden">
    <header class="w-full py-5 bg-white/10 backdrop-blur-md shadow-lg sticky top-0 z-50">
      <div class="container mx-auto flex justify-center items-center px-4">
        <a href="/">
          <img src="./assets/Logo.png" alt="Los Simpsons" class="h-20 drop-shadow-[0_0_6px_cyan]" />
        </a>
      </div>
    </header>

    <main class="container mx-auto p-6">
      <h1 class="text-3xl font-bold text-yellow-400 text-center mb-8 border-b-2 border-gray-600 pb-2">
        Los Simpsons API - Tailwind + Vite + TS
      </h1>

      <div class="flex flex-col md:flex-row justify-center gap-4 mb-8">
        <input id="name-filter" type="text" placeholder="Buscar personaje..."
          class="w-72 px-4 py-3 text-white bg-gray-800 border-2 border-yellow-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" />
        <select id="filter-gender"
          class="w-72 px-4 py-3 text-white bg-gray-800 border-2 border-yellow-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500">
          <option value="">Todos los géneros</option>
          <option value="Masculino">Masculino</option>
          <option value="Femenino">Femenino</option>
        </select>
        <select id="filter-status"
          class="w-72 px-4 py-3 text-white bg-gray-800 border-2 border-yellow-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500">
          <option value="">Todos los estados</option>
          <option value="Vivo">Vivo</option>
          <option value="Fallecido">Fallecido</option>
          <option value="Biblico">Biblico</option>
          <option value="Robot">Robot</option>
          <option value="Ficticio">Ficticio</option>
          <option value="Estatua">Estatua</option>
        </select>
        <input id="filter-job" type="text" placeholder="Filtrar por ocupación..."
          class="w-72 px-4 py-3 text-white bg-gray-800 border-2 border-yellow-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" />

        <div class="flex gap-4">
          <select id="theme-selector"
            class="w-72 px-4 py-3 text-white bg-gray-800 border-2 border-yellow-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500">
            <option value="1">Tema 1</option>
            <option value="2">Tema 2</option>
            <option value="3">Tema 3</option>
          </select>
        </div>
      </div>

      <section id="simpsons-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
        <div
          class="character-card bg-gray-800 p-4 rounded-md border-2 border-gray-600 shadow-lg flex flex-col items-center">
          <div class="w-64 h-48 bg-white rounded-lg overflow-hidden flex items-center justify-center mb-4">
            <img src="ruta/a/imagen.jpg" alt="Personaje" class="object-cover w-full h-full rounded-lg" />
          </div>
          <h3 class="text-center text-lg sm:text-xl md:text-2xl font-semibold text-yellow-400 mb-1">Nombre del personaje
          </h3>
          <p class="text-xs sm:text-sm md:text-base text-white text-left sm:text-center">Ocupación: Desconocida</p>
          <p class="text-xs sm:text-sm md:text-base text-white text-left sm:text-center">Estado: Desconocido</p>
        </div>
      </section>

      <section id="character" class="hidden mt-10 p-6 bg-gray-800 rounded-md shadow-lg border-2 border-gray-600">
        <div class="flex flex-col md:flex-row items-center gap-6">
          <img id="character-image" src="" alt="Imagen personaje"
            class="w-48 h-60 object-cover rounded-lg shadow-lg border-2 border-yellow-400" />
          <div class="text-left space-y-2">
            <h2 id="character-title" class="text-2xl font-bold text-yellow-400">Nombre</h2>
            <p id="character-genre">Género</p>
            <p id="character-state">Estado</p>
            <p id="character-employment">Ocupación</p>
            <p id="character-description" class="mt-4">Descripción</p>
          </div>
        </div>
        <div class="text-right mt-4">
          <button id="btn-close-detail" class="text-red-400 hover:text-red-600 transition flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2"
              viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
            Cerrar
          </button>
        </div>
      </section>

      <div id="pagination" class="flex justify-center mt-8 flex-wrap gap-2"></div>
    </main>
  </div>

  
  <div id="quiz" class="hidden container mx-auto p-6">
    <h2 class="text-3xl font-bold text-yellow-400 text-center mb-8">Quiz de Los Simpsons</h2>
    <div id="quiz-container" class="bg-gray-800 p-6 rounded-md shadow-md border-2 border-yellow-400">
      <div id="question" class="text-xl font-semibold mb-4">Cargando pregunta...</div>
      <div id="answers" class="flex flex-col gap-3"></div>
      <div class="mt-6 text-right">
        <button id="next-question"
          class="px-6 py-3 bg-yellow-400 text-gray-900 font-bold rounded-md hover:bg-yellow-300 transition">Siguiente</button>
      </div>
    </div>
  </div>

  <footer class="text-center mt-10 py-6 bg-gray-800 border-t-2 border-gray-600 text-sm text-white/70">
    <p>
      Creado por <strong class="text-yellow-400">Luis Ricardo Vanegas</strong> - 2025 &copy;
    </p>
  </footer>

  <script>
    const pantallaCarga = document.getElementById('pantalla-carga');
    const contenido = document.getElementById('contenido');
    const quiz = document.getElementById('quiz');

    document.getElementById('btn-entrar').addEventListener('click', () => {
      pantallaCarga.classList.add('hidden');
      contenido.classList.remove('hidden');
      quiz.classList.add('hidden');
    });

    document.getElementById('btn-quiz').addEventListener('click', () => {
      pantallaCarga.classList.add('hidden');
      contenido.classList.add('hidden');
      quiz.classList.remove('hidden');
      startQuiz();
    });

   
    document.getElementById('theme-selector').addEventListener('change', (event) => {
      const theme = event.target.value;
      document.body.classList.remove('inverted', 'theme-3');
      if (theme === "2") {
        document.body.classList.add('inverted');
      } else if (theme === "3") {
        document.body.classList.add('theme-3');
      }
    });

    // Quiz Lógica
    const questionElement = document.getElementById('question');
    const answersElement = document.getElementById('answers');
    const nextButton = document.getElementById('next-question');
    let currentCharacter = null;

    async function fetchRandomCharacter() {
      const skip = Math.floor(Math.random() * 550); // bajamos un poco por si el total es menor
      const response = await fetch(`https://apisimpsons.fly.dev/api/personajes?limit=10&skip=${skip}`);
      const data = await response.json();
      const personajes = data.docs;

      if (personajes.length === 0) {
        throw new Error('No se encontraron personajes');
      }

      // Elegimos uno aleatorio del array recibido
      const randomIndex = Math.floor(Math.random() * personajes.length);
      return personajes[randomIndex];
    }


    async function renderQuestion() {
      currentCharacter = await fetchRandomCharacter(); 

   
      const preguntas = [
        {
          texto: `¿Cuál es la ocupación de ${currentCharacter.Nombre}?`,
          correcta: currentCharacter.Ocupacion || 'Desconocida',
          opcionesExtra: ["Estudiante", "Amo de casa", "Trabajador nuclear", "Cantante", "Policía", "Doctor"]
        },
        {
          texto: `¿Cuál es el género de ${currentCharacter.Nombre}?`,
          correcta: currentCharacter.Genero || 'Desconocido',
          opcionesExtra: ["Masculino", "Femenino", "Robot", "Otro"]
        },
        {
          texto: `¿Cuál es el estado de ${currentCharacter.Nombre}?`,
          correcta: currentCharacter.Estado || 'Desconocido',
          opcionesExtra: ["Vivo", "Fallecido", "Robot", "Biblico", "Estatua"]
        }
      ];

      // Elegimos una pregunta aleatoria de las opciones anteriores
      const preguntaElegida = preguntas[Math.floor(Math.random() * preguntas.length)];
      questionElement.textContent = preguntaElegida.texto;

      const opciones = [preguntaElegida.correcta];


      while (opciones.length < 4) {
        const extra = preguntaElegida.opcionesExtra[Math.floor(Math.random() * preguntaElegida.opcionesExtra.length)];
        if (!opciones.includes(extra)) opciones.push(extra);
      }

      opciones.sort(() => Math.random() - 0.5); // Mezclamos las opciones
      answersElement.innerHTML = ''; // Limpiamos respuestas previas

      // Generamos los botones para las opciones de respuesta
      opciones.forEach(opcion => {
        const btn = document.createElement('button');
        btn.textContent = opcion;
        btn.className = 'bg-gray-700 hover:bg-yellow-400 hover:text-gray-900 text-white px-4 py-2 rounded-md transition';
        btn.onclick = () => {
          Array.from(answersElement.children).forEach(b => b.disabled = true);
          if (opcion === preguntaElegida.correcta) {
            btn.classList.remove('bg-gray-700');
            btn.classList.add('bg-green-500');
          } else {
            btn.classList.remove('bg-gray-700');
            btn.classList.add('bg-red-500');
          }
        };
        answersElement.appendChild(btn); // Añadimos cada opción al contenedor de respuestas
      });
    }

    function startQuiz() {
      renderQuestion(); // Comenzamos el quiz cargando la primera pregunta
    }

    nextButton.addEventListener('click', renderQuestion); // Evento para cargar la siguiente pregunta
  </script>

</body>

</html>